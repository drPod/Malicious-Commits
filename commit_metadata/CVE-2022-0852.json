{
  "convert2rhel": [
    {
      "hash": "fa95b2afbfe8d970e40912286f0e7959b75b7df5",
      "author": "Adam Hosek",
      "author_email": "hosek.adam@outlook.com",
      "committed_date": "2021-05-03T14:28:15+02:00",
      "message": "UX improvement, without Black formater",
      "files_changed": [
        "convert2rhel/subscription.py"
      ],
      "insertions": 11,
      "deletions": 4,
      "original_hash": "fa95b2afbfe8d970e40912286f0e7959b75b7df5",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "861dc03fdaa050efdc18dafd257859ff3e53380e",
      "author": "Michal Bocek",
      "author_email": "mbocek@redhat.com",
      "committed_date": "2020-02-11T16:58:15+01:00",
      "message": "Return 0 on help message",
      "files_changed": [
        "convert2rhel/main.py",
        "convert2rhel/utils.py"
      ],
      "insertions": 37,
      "deletions": 16,
      "original_hash": "861dc03fdaa050efdc18dafd257859ff3e53380e",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "17f6dbfa82ec5a141f512e62c964cef391af0678",
      "author": "Andrew Anglin",
      "author_email": "aanglin@redhat.com",
      "committed_date": "2022-01-27T10:09:36-08:00",
      "message": "Port run_subprocess and run_cmd_in_pty to take the command as a list instead of a string.\n\nSending a subprocess command as a string can be prone to bugs because\nthe user has to remember to quote any value that could have a space in\nit.  When the values are stored in variables, it can be hard to remember\nto do that.  If you don't quote, then arguments might be inappropriately\nsplit when a space occurs in the user supplied data.\n\nPassing the command as a list instead avoids this because the programmer\nhas to consider what are separate arguments when they place each element\nin the list.  Placing a variable directly into the list will alway be\ninterpreted as a single argument even if there are embedded spaces.\n\nFor now, also check that we aren't misusing the cmd argument by\npassing in a list anywhere in the code.\n\nFixes: https://issues.redhat.com/browse/OAMG-6183",
      "files_changed": [
        "convert2rhel/checks.py",
        "convert2rhel/grub.py",
        "convert2rhel/pkghandler.py",
        "convert2rhel/redhatrelease.py",
        "convert2rhel/subscription.py",
        "convert2rhel/systeminfo.py",
        "convert2rhel/unit_tests/__init__.py",
        "convert2rhel/unit_tests/grub_test.py",
        "convert2rhel/unit_tests/pkghandler_test.py",
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/unit_tests/systeminfo_test.py",
        "convert2rhel/unit_tests/utils_test.py",
        "convert2rhel/utils.py"
      ],
      "insertions": 202,
      "deletions": 158,
      "original_hash": "17f6dbfa82ec5a141f512e62c964cef391af0678",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "e7a1b5af6d3c21f910dbb3de538a0f50a8c7fb53",
      "author": "zhukovgreen",
      "author_email": "iam@zhukovgreen.pro",
      "committed_date": "2021-02-24T18:33:30+01:00",
      "message": "Move loggerinst at the module level\n\nAlso removed some not used imports and reorganized them",
      "files_changed": [
        "convert2rhel/cert.py",
        "convert2rhel/main.py",
        "convert2rhel/pkghandler.py",
        "convert2rhel/redhatrelease.py",
        "convert2rhel/repo.py",
        "convert2rhel/subscription.py",
        "convert2rhel/toolopts.py",
        "convert2rhel/unit_tests/cert_test.py",
        "convert2rhel/unit_tests/main_test.py",
        "convert2rhel/unit_tests/pkghandler_test.py",
        "convert2rhel/unit_tests/subscription_test.py"
      ],
      "insertions": 77,
      "deletions": 112,
      "original_hash": "e7a1b5af6d3c21f910dbb3de538a0f50a8c7fb53",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "7b40f59d1516cd6f01c95dd164d7157f7c0bcec2",
      "author": "Rodolfo Olivieri",
      "author_email": "rolivier@redhat.com",
      "committed_date": "2022-03-08T13:41:33+01:00",
      "message": "Prevent user from not selecting an response (#390)\n\nAdd a loop to prevent the user from not responding to the question, this will cause\r\na loop of the same question being asked every time the user just hit enter\r\nwithout answering anything to the tool.\r\n\r\nJira reference: https://issues.redhat.com/browse/OAMG-3143\r\n\r\nSigned-off-by: Rodolfo Olivieri <rolivier@redhat.com>\r\nCo-authored-by: Daniel Diblik <8378124+danmyway@users.noreply.github.com>\r\n\r\nCo-authored-by: danmyway <ddiblik@redhat.com>\r\nCo-authored-by: Daniel Diblik <8378124+danmyway@users.noreply.github.com>",
      "files_changed": [
        "convert2rhel/subscription.py",
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/unit_tests/utils_test.py",
        "convert2rhel/utils.py",
        "plans/tier0.fmf",
        "tests/integration/tier0/check-user-response/main.fmf",
        "tests/integration/tier0/check-user-response/test_user_response.py"
      ],
      "insertions": 155,
      "deletions": 30,
      "original_hash": "7b40f59d1516cd6f01c95dd164d7157f7c0bcec2",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "66605809d4c3dfa369a30683d038ef131f71ba96",
      "author": "Michal Bocek",
      "author_email": "mbocek@redhat.com",
      "committed_date": "2021-06-30T11:21:47+02:00",
      "message": "Allow conversions of offline systems\n\nNew option --keep-rhsm is used. The user needs to install the\nsubscription-manager package before performing the conversion.",
      "files_changed": [
        "convert2rhel/main.py",
        "convert2rhel/subscription.py",
        "convert2rhel/toolopts.py",
        "convert2rhel/unit_tests/main_test.py",
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/unit_tests/toolopts_test.py"
      ],
      "insertions": 135,
      "deletions": 17,
      "original_hash": "66605809d4c3dfa369a30683d038ef131f71ba96",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "154ac63520c66717515723aeb348d35eea968ce4",
      "author": "Andrew-ang9",
      "author_email": "91086569+Andrew-ang9@users.noreply.github.com",
      "committed_date": "2022-04-13T12:30:50+00:00",
      "message": "Auto-attach subscription when there is only one (#385)\n\nAlso, previous to this change, if a pool had been specified on the\r\nconvert2rhel command line and attach_subscription() was called more than\r\nonce, the subscription-manager command line would be constructed\r\nincorrectly.  It would have \"--pool\" added to the front of the pool id\r\neach time attach-subscription was called leading to something like this:\r\n\"subscription-manager attach --pool --pool POOLID\".\r\n\r\nTo fix this, we now treat tool_opts.pool as read-only and do not modify\r\nit on each call to attach_subscription().  This goes along with our\r\noverall move to treat global singletons as read-only whenever possible.",
      "files_changed": [
        "convert2rhel/subscription.py",
        "convert2rhel/unit_tests/subscription_test.py",
        "tests/integration/tier0/check-user-response/test_user_response.py"
      ],
      "insertions": 65,
      "deletions": 12,
      "original_hash": "154ac63520c66717515723aeb348d35eea968ce4",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "7ff8be6047544f6e7ff090643a8d8ad11d553193",
      "author": "Eric Gustavsson",
      "author_email": "SpyTec@users.noreply.github.com",
      "committed_date": "2020-10-21T14:56:49+00:00",
      "message": "Conversions to RHEL 8 (#82)\n\n* Allow conversions of x86_64 CentOS 8 to OL 8\r\n\r\n- The code is now both python 2 and 3 compatible.\r\n- Update the unit testing environment to add CentOS 8.\r\n- Set up running pylint with python 3 as well. Update pylint checks to run\r\n- on latest CentOS minor versions.\r\n- Use dnf on CentOS 8, yum on CentOS/OL 6 and 7.\r\n- Allow building a package on CentOS 8.\r\n- Update the script for building the RPM package locally on CentOS/OL to\r\n  support also CentOS/OL 8.\r\n- Remove python2 shebang from setup.py - the file is both py2 & py3\r\n  compatible.\r\n- Spec file updates:\r\n  - Avoid spec linting errors on CentOS/OL 6 by using defattr in the spec.\r\n  - Change %epel to %rhel in spec as it's possible to use %rhel even in a\r\n    spec file for EPEL.\r\n  - Remove buildsys-macros as that was needed only for RHEL5 and its\r\n    derivates which are not supported by convert2rhel anymore.\r\n  - Remove the epel-rpm-macros dependency - it's not necessary for building\r\n    a package for EPEL.\r\n  - Merge EPEL and CentOS/OL spec files, there is no need to differentiate\r\n    them anymore.\r\n  - Identify submgr-related deps - these should be removed in the\r\n    subsequent PRs. We should leave yum to handle those.\r\n  - Remove sed and gnupg2 deps as they are not used in the code anymore.\r\n- When printing package information in a table, we used to print a package\r\n  vendor. However, when using dnf now, dnf does not provide the vendor\r\n  information (https://bugzilla.redhat.com/show_bug.cgi?id=1876561). So\r\n  instead, we print a package packager now.\r\n- There's a workaround implemented to get a pkg fingerprint on CentOS 8.\r\n  It's due to the fact that it's not currently possible to get a pkg\r\n  header through the dnf API\r\n  (https://bugzilla.redhat.com/show_bug.cgi?id=1876606).\r\n- Remove unused parameters from the run_unit_tests.sh script, like\r\n  coverage, output coloring and clearing logging handlers.\r\n- Use the run_unit_tests.sh script in the Testing Farm instead of\r\n  executing `nosetests` command directly (which would not work on CentOS 8\r\n  where the binary is `nosetest-3`).\r\n- Allow multiple default RHSM repoids in a config. Previously it was possible\r\n  to have just one default RHSM repo in config file. It was a problem for\r\n  RHEL 8 where there are two main repos that are supposed to be enabled\r\n  (BaseOS and AppStream).\r\n- We recently introduced clearing yum version locks. The functionality works also with dnf.\r\nCo-authored-by: Michal Bocek <mbocek@redhat.com>",
      "files_changed": [
        ".copr/Makefile",
        ".github/workflows/coverage.yml",
        ".github/workflows/pylint.yml",
        ".packit.yaml",
        "CONTRIBUTING.md",
        "Dockerfiles/centos6",
        "Dockerfiles/centos7",
        "Dockerfiles/centos8",
        "Makefile",
        "convert2rhel/data/6/x86_64/configs/centos-6-x86_64.cfg",
        "convert2rhel/data/6/x86_64/configs/oracle-6-x86_64.cfg",
        "convert2rhel/data/6/x86_64/configs/suse_es-6-x86_64.cfg",
        "convert2rhel/data/7/ppc64/configs/centos-7-ppc64.cfg",
        "convert2rhel/data/7/x86_64/configs/centos-7-x86_64.cfg",
        "convert2rhel/data/7/x86_64/configs/oracle-7-x86_64.cfg",
        "convert2rhel/data/7/x86_64/configs/suse_es-7-x86_64.cfg",
        "convert2rhel/data/8/x86_64/configs/centos-8-x86_64.cfg",
        "convert2rhel/logger.py",
        "convert2rhel/main.py",
        "convert2rhel/pkghandler.py",
        "convert2rhel/pkgmanager.py",
        "convert2rhel/redhatrelease.py",
        "convert2rhel/repo.py",
        "convert2rhel/systeminfo.py",
        "convert2rhel/unit_tests/pkghandler_test.py",
        "convert2rhel/unit_tests/repo_test.py",
        "convert2rhel/unit_tests/systeminfo_test.py",
        "convert2rhel/unit_tests/utils_test.py",
        "convert2rhel/utils.py",
        "packaging/build_in_copr.sh",
        "packaging/build_locally.sh",
        "packaging/centos_ol/build_in_copr.sh",
        "packaging/centos_ol/build_locally.sh",
        "packaging/centos_ol/convert2rhel.spec",
        "packaging/convert2rhel.spec",
        "packaging/create_epel_srpm.sh",
        "packaging/epel/convert2rhel.spec",
        "packaging/epel/create_epel_srpm.sh",
        "plans/unittests.fmf",
        "requirements.txt",
        "run_unit_tests.sh",
        "setup.py"
      ],
      "insertions": 786,
      "deletions": 650,
      "original_hash": "7ff8be6047544f6e7ff090643a8d8ad11d553193",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "e227565cc973b22d21d638dc6c0a1deae42ea4b5",
      "author": "Eric Gustavsson",
      "author_email": "SpyTec@users.noreply.github.com",
      "committed_date": "2020-11-05T17:31:21+00:00",
      "message": "fix(Utils): Avoid byte error by ascii encoding cmd (#114)\n\nPython 2.6-related only.",
      "files_changed": [
        "convert2rhel/unit_tests/utils_test.py",
        "convert2rhel/utils.py"
      ],
      "insertions": 7,
      "deletions": 2,
      "original_hash": "e227565cc973b22d21d638dc6c0a1deae42ea4b5",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "b6e09099f2669435c453b91bf36ecbea2a7398ce",
      "author": "Michal Bocek",
      "author_email": "mbocek@redhat.com",
      "committed_date": "2020-10-19T12:16:25+00:00",
      "message": "Enable in yum repos enabled through RHSM\n\nThere was a bug causing that when subscription-manager was used for the\nconversions, no repository got enabled when calling yum. And because by\ndefault convert2rhel disables all repos in yum calls except those to be\nspecifically enabled, the conversion could not proceed.",
      "files_changed": [
        "convert2rhel/pkghandler.py",
        "convert2rhel/subscription.py",
        "convert2rhel/systeminfo.py",
        "convert2rhel/unit_tests/pkghandler_test.py"
      ],
      "insertions": 25,
      "deletions": 8,
      "original_hash": "b6e09099f2669435c453b91bf36ecbea2a7398ce",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "e6d811e4b8af0f147c8f32ddc87881698f6885e9",
      "author": "Fellipe Henrique",
      "author_email": "fpedrosa@redhat.com",
      "committed_date": "2021-02-03T18:56:21+01:00",
      "message": "Download subscription-manager automatically\n\nCo-authored-by: Eric Gustavsson <SpyTec@users.noreply.github.com>",
      "files_changed": [
        "convert2rhel/main.py",
        "convert2rhel/pkghandler.py",
        "convert2rhel/subscription.py",
        "convert2rhel/unit_tests/main_test.py",
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/unit_tests/utils_test.py",
        "convert2rhel/utils.py"
      ],
      "insertions": 207,
      "deletions": 8,
      "original_hash": "e6d811e4b8af0f147c8f32ddc87881698f6885e9",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "b87046035499df3ad76909423af0db271077d231",
      "author": "Fellipe Henrique",
      "author_email": "fpedrosa@redhat.com",
      "committed_date": "2020-05-28T18:22:29+02:00",
      "message": "Always log debug info to the log file\n\nNow debug info is stored inside log file, whatever the user use or not\n`--debug` argument.\n\nFixed when user not pass `--debug` information, the info was passed to\nstdout, now these info only passed to the stdout if user add the debug\nargument.\n\nSigned-off-by: Fellipe Henrique <fpedrosa@redhat.com>",
      "files_changed": [
        "convert2rhel/logger.py",
        "convert2rhel/unit_tests/logger_test.py",
        "convert2rhel/utils.py"
      ],
      "insertions": 23,
      "deletions": 7,
      "original_hash": "b87046035499df3ad76909423af0db271077d231",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "5e1470b941ba96c7bfba9c1f6f26639a0f7bb627",
      "author": "Rodolfo Olivieri",
      "author_email": "rolivier@redhat.com",
      "committed_date": "2022-05-14T00:02:06+02:00",
      "message": "Add condition to not backup specific package\n\nRight now we have a package that exists in CentOS Linux 8.4, but was not\nported to CentOS Linux 8.5 causing a conversion error when that package\nis present on any system.\n\nThe simplest fix to this is not backing up the package when we remove it\nas the backup process uses `yumdownloader` and therefore,\n`yumdownloader` uses any enabled repos that are present on the system.\n\nJira reference (If any): https://issues.redhat.com/browse/OAMG-6422\nBugzilla reference (If any): https://bugzilla.redhat.com/show_bug.cgi?id=2046292\n\nSigned-off-by: Rodolfo Olivieri <rolivier@redhat.com>",
      "files_changed": [
        "convert2rhel/subscription.py",
        "convert2rhel/unit_tests/subscription_test.py"
      ],
      "insertions": 40,
      "deletions": 1,
      "original_hash": "5e1470b941ba96c7bfba9c1f6f26639a0f7bb627",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "8860146465cf3a5df0d8ebca8615b25ff2ef4c26",
      "author": "pre-commit-ci[bot]",
      "author_email": "66853113+pre-commit-ci[bot]@users.noreply.github.com",
      "committed_date": "2022-05-14T00:02:06+02:00",
      "message": "[pre-commit.ci] auto fixes from pre-commit.com hooks\n\nfor more information, see https://pre-commit.ci",
      "files_changed": [
        "convert2rhel/unit_tests/subscription_test.py",
        "plans/tier1.fmf"
      ],
      "insertions": 8,
      "deletions": 1,
      "original_hash": "8860146465cf3a5df0d8ebca8615b25ff2ef4c26",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "9e5c909354565843f10be34d879fbbdafa31110a",
      "author": "Fellipe Henrique",
      "author_email": "fpedrosa@redhat.com",
      "committed_date": "2021-03-11T09:59:18-03:00",
      "message": "Check if /mnt /sys is read/write\n\nThis commit will check if `/mnt` and `/sys` are read/write, if not, will abort the conversion.\n\nRelated BZ: https://bugzilla.redhat.com/show_bug.cgi?id=1887513",
      "files_changed": [
        "convert2rhel/main.py",
        "convert2rhel/unit_tests/__init__.py",
        "convert2rhel/unit_tests/main_test.py",
        "convert2rhel/unit_tests/utils_test.py",
        "convert2rhel/utils.py"
      ],
      "insertions": 75,
      "deletions": 25,
      "original_hash": "9e5c909354565843f10be34d879fbbdafa31110a",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "8a786d1d5291b50c3b32593cc569a5776e830c18",
      "author": "Michal Bocek",
      "author_email": "mbocek@redhat.com",
      "committed_date": "2021-02-02T23:11:00+01:00",
      "message": "Pass platform ID to dnf on CentOS/OL 8\n\nWithout the *-release pkg installed, dnf can't determine the\nmodularity platform ID.",
      "files_changed": [
        "convert2rhel/main.py",
        "convert2rhel/pkghandler.py",
        "convert2rhel/redhatrelease.py",
        "convert2rhel/unit_tests/pkghandler_test.py",
        "convert2rhel/unit_tests/utils_test.py",
        "convert2rhel/utils.py"
      ],
      "insertions": 29,
      "deletions": 4,
      "original_hash": "8a786d1d5291b50c3b32593cc569a5776e830c18",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "eaefc049c95a7f227cdb9db8ddbb9dc8ddb2cbe0",
      "author": "Michal Bocek",
      "author_email": "mbocek@redhat.com",
      "committed_date": "2020-06-15T21:53:49+02:00",
      "message": "Fix parsing RHSM output\n\n- the output of `subscription-manager list --available` has changed and due\n  to that the convert2rhel was unable to list any available subscription",
      "files_changed": [
        "Makefile",
        "convert2rhel/subscription.py",
        "convert2rhel/unit_tests/subscription_test.py"
      ],
      "insertions": 52,
      "deletions": 114,
      "original_hash": "eaefc049c95a7f227cdb9db8ddbb9dc8ddb2cbe0",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "265e52f7c7d8b27c3b6b6c3ffd252fcc1737e50c",
      "author": "Eric Gustavsson",
      "author_email": "egustavs@redhat.com",
      "committed_date": "2021-02-03T00:05:28+01:00",
      "message": "Remove non-RHSM release packages\n\nRemove subscription-manager on rollback.\nCall yum cmd instead of utils remove pkgs.",
      "files_changed": [
        "convert2rhel/data/6/x86_64/configs/centos-6-x86_64.cfg",
        "convert2rhel/data/6/x86_64/configs/oracle-6-x86_64.cfg",
        "convert2rhel/data/7/x86_64/configs/centos-7-x86_64.cfg",
        "convert2rhel/data/7/x86_64/configs/oracle-7-x86_64.cfg",
        "convert2rhel/data/8/x86_64/configs/centos-8-x86_64.cfg",
        "convert2rhel/data/8/x86_64/configs/oracle-8-x86_64.cfg",
        "convert2rhel/main.py",
        "convert2rhel/pkghandler.py",
        "convert2rhel/subscription.py",
        "convert2rhel/systeminfo.py",
        "convert2rhel/unit_tests/main_test.py",
        "convert2rhel/unit_tests/pkghandler_test.py",
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/unit_tests/utils_test.py",
        "convert2rhel/utils.py"
      ],
      "insertions": 151,
      "deletions": 63,
      "original_hash": "265e52f7c7d8b27c3b6b6c3ffd252fcc1737e50c",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "d180bea9946b4e878c1f556469682d53f5dc9b1f",
      "author": "Fellipe Henrique",
      "author_email": "fpedrosa@redhat.com",
      "committed_date": "2020-06-08T15:28:07-03:00",
      "message": "Add RHN Classic checker\n\nIf RHN Classic is present,  conert2rhel will raise a CRITICAL message\nand abort the process.\n\nChanges/moving files to subscription\n\n- Moving is_rhn_classic_used function to the subscription.py\n- Creating unregister method into subscription.py",
      "files_changed": [
        "convert2rhel/main.py",
        "convert2rhel/pkghandler.py",
        "convert2rhel/rhelvariant.py",
        "convert2rhel/subscription.py",
        "convert2rhel/unit_tests/subscription_test.py"
      ],
      "insertions": 65,
      "deletions": 4,
      "original_hash": "d180bea9946b4e878c1f556469682d53f5dc9b1f",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "e515916f750eeb53ae6a3d3ddb1d0916d666176b",
      "author": "Michal Bocek",
      "author_email": "mbocek@redhat.com",
      "committed_date": "2021-02-03T00:00:36+01:00",
      "message": "Move installing sub-mgr to the beginning\n\nIt's to ensure that all the standard original system repos are still\navailable for yum to get sub-mgr deps. We can remove the excluded pkgs\nlike oraclelinux-release or centos-release later - these provide the\nstandard system repofiles.",
      "files_changed": [
        "convert2rhel/main.py",
        "convert2rhel/pkghandler.py",
        "convert2rhel/subscription.py",
        "convert2rhel/unit_tests/main_test.py",
        "convert2rhel/unit_tests/pkghandler_test.py",
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/utils.py"
      ],
      "insertions": 79,
      "deletions": 34,
      "original_hash": "e515916f750eeb53ae6a3d3ddb1d0916d666176b",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "2c96035ac4dd10947ceda2774afae204f148025c",
      "author": "Rodolfo Olivieri",
      "author_email": "rolivier@redhat.com",
      "committed_date": "2022-03-23T15:12:17+01:00",
      "message": "Untrack previously installed submgr dependencies (#393)\n\nCo-authored-by: Daniel Diblik <8378124+danmyway@users.noreply.github.com>\r\nCo-authored-by: Daniel Diblik <ddiblik@redhat.com>\r\n\r\nOAMG-5749 #done",
      "files_changed": [
        "convert2rhel/pkghandler.py",
        "convert2rhel/subscription.py",
        "convert2rhel/unit_tests/pkghandler_test.py",
        "convert2rhel/unit_tests/subscription_test.py",
        "plans/tier0.fmf",
        "tests/integration/tier0/resolve-broken-ol8-rollback/main.fmf",
        "tests/integration/tier0/resolve-broken-ol8-rollback/test_resolve_broken_ol8_rollback.py",
        "tests/integration/tier0/test-check-rollback-handling/main.fmf",
        "tests/integration/tier0/test-check-rollback-handling/test_check_rollback_handling.py"
      ],
      "insertions": 267,
      "deletions": 72,
      "original_hash": "2c96035ac4dd10947ceda2774afae204f148025c",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "8f08ac7f0c0f81df997053cf18cdabfa6698a7e3",
      "author": "Michal Bocek",
      "author_email": "mbocek@redhat.com",
      "committed_date": "2020-09-18T09:17:37+02:00",
      "message": "Do not expect offline snapshot of RHEL repos\n\nThe feature of consuming the offline snapshot of RHEL repos hasn't ever been\nused in upstream and it's not planned to be ever used. It used to provide\ninformation to the user prior the conversion about what packages *might*\nnot be available in RHEL. Considering that we have no mechanism to get such\nsnapshot publicly, the feature is being removed to make the code simpler.",
      "files_changed": [
        "convert2rhel/main.py",
        "convert2rhel/pkghandler.py",
        "convert2rhel/repo.py",
        "convert2rhel/subscription.py",
        "convert2rhel/systeminfo.py",
        "convert2rhel/unit_tests/pkghandler_test.py",
        "convert2rhel/unit_tests/repo_test.py",
        "convert2rhel/unit_tests/subscription_test.py"
      ],
      "insertions": 128,
      "deletions": 270,
      "original_hash": "8f08ac7f0c0f81df997053cf18cdabfa6698a7e3",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "ce59268006230aeb08991c200b5e794bd0364b34",
      "author": "zhukovgreen",
      "author_email": "iam@zhukovgreen.pro",
      "committed_date": "2021-05-17T18:31:39+02:00",
      "message": "Add pre-commit configs and ci workflow\n\nThe pre-commit mainly adds black formatting and import sorting.",
      "files_changed": [
        ".coveragerc",
        ".env.example",
        ".github/workflows/coverage.yml",
        ".github/workflows/pre-commit.yml",
        ".github/workflows/release.yml",
        ".gitignore",
        ".pre-commit-config.yaml",
        "CONTRIBUTING.md",
        "Makefile",
        "ansible/ansible-convert2rhel.yml",
        "convert2rhel/checks.py",
        "convert2rhel/data/6/x86_64/configs/centos-6-x86_64.cfg",
        "convert2rhel/data/6/x86_64/configs/oracle-6-x86_64.cfg",
        "convert2rhel/data/6/x86_64/configs/suse_es-6-x86_64.cfg",
        "convert2rhel/data/7/ppc64/configs/centos-7-ppc64.cfg",
        "convert2rhel/data/7/x86_64/configs/centos-7-x86_64.cfg",
        "convert2rhel/data/7/x86_64/configs/oracle-7-x86_64.cfg",
        "convert2rhel/data/7/x86_64/configs/suse_es-7-x86_64.cfg",
        "convert2rhel/data/8/x86_64/configs/centos-8-x86_64.cfg",
        "convert2rhel/data/8/x86_64/configs/oracle-8-x86_64.cfg",
        "convert2rhel/data/version-independent/GLOBAL_EULA_RHEL",
        "convert2rhel/data/version-independent/gpg-keys/RPM-GPG-KEY-redhat-release",
        "convert2rhel/logger.py",
        "convert2rhel/main.py",
        "convert2rhel/pkghandler.py",
        "convert2rhel/pkgmanager.py",
        "convert2rhel/redhatrelease.py",
        "convert2rhel/repo.py",
        "convert2rhel/special_cases.py",
        "convert2rhel/subscription.py",
        "convert2rhel/systeminfo.py",
        "convert2rhel/toolopts.py",
        "convert2rhel/unit_tests/README",
        "convert2rhel/unit_tests/__init__.py",
        "convert2rhel/unit_tests/cert_test.py",
        "convert2rhel/unit_tests/checks_test.py",
        "convert2rhel/unit_tests/conftest.py",
        "convert2rhel/unit_tests/dummy_file",
        "convert2rhel/unit_tests/example_test.py",
        "convert2rhel/unit_tests/main_test.py",
        "convert2rhel/unit_tests/other_test.py",
        "convert2rhel/unit_tests/pkghandler_test.py",
        "convert2rhel/unit_tests/redhatrelease_test.py",
        "convert2rhel/unit_tests/repo_test.py",
        "convert2rhel/unit_tests/special_cases_test.py",
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/unit_tests/systeminfo_test.py",
        "convert2rhel/unit_tests/toolopts_test.py",
        "convert2rhel/unit_tests/utils_test.py",
        "convert2rhel/utils.py",
        "man/build_manpage.py",
        "packaging/convert2rhel.spec",
        "plans/integration/inhibit-if-kmods-is-not-supported/main.fmf",
        "plans/integration/inhibit-if-oracle-system-uses-not-standard-kernel/main.fmf",
        "plans/main.fmf",
        "pyproject.toml",
        "pytest.ini",
        "requirements/centos6.requirements.txt",
        "requirements/local.centos8.requirements.txt",
        "setup.py",
        "tests/ansible_collections/roles/install-testing-deps/tasks/main.yml",
        "tests/ansible_collections/roles/oracle-linux-specific/tasks/main.yml",
        "tests/ansible_collections/roles/packaging/tasks/build_rpm.yml",
        "tests/integration/README.md",
        "tests/integration/conftest.py",
        "tests/integration/inhibit-if-kmods-is-not-supported/test_kmods_not_supported.py",
        "tests/integration/inhibit-if-oracle-system-uses-not-standard-kernel/ansible/basic_setup.yml",
        "tests/integration/inhibit-if-oracle-system-uses-not-standard-kernel/main.fmf",
        "tests/integration/inhibit-if-oracle-system-uses-not-standard-kernel/test_oracle_bad_kernel.py",
        "tests/integration/remove-excluded-pkgs/main.fmf",
        "tests/integration/remove-excluded-pkgs/test_remove_excluded_pkgs.py",
        "tests/integration/remove_all_submgr_pkgs/test_remove_all_submgr_pkgs.py",
        "tests/integration/resolve-broken-ol8-rollback/test_resolve_broken_ol8_rollback.py"
      ],
      "insertions": 1507,
      "deletions": 1189,
      "original_hash": "ce59268006230aeb08991c200b5e794bd0364b34",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "5e596b545e33192aa32cfdff1f93e1bc1e43301f",
      "author": "Toshio Kuratomi",
      "author_email": "a.badger@gmail.com",
      "committed_date": "2021-12-09T10:04:05+00:00",
      "message": "Port test_download_rhsm_pkgs from unittest to pytest.\n\nThis way we can use parametrize to separate each call of the function\nwe're testing.  Previously, when it was all done in a single function,\nthe test could have side-effects carried over from one call to the\nnext.  For instance, in the test, the count of how many times\n_download_rhsm_pkgs() was called incremented on every call to the public\nfunction.  Using parametrize resets that counter to zero between every\nrun which allows the test's code to express the logical constraints\n(_download_rhsm_pkgs() is called once) rather than an implementation\n(_download_rhsm_pkgs() was called once more than the number of times it\nwas called previously).",
      "files_changed": [
        "convert2rhel/unit_tests/subscription_test.py"
      ],
      "insertions": 73,
      "deletions": 60,
      "original_hash": "5e596b545e33192aa32cfdff1f93e1bc1e43301f",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "78b32fb581ce818d44fbb33d854f7c1b5761c674",
      "author": "Fellipe Henrique",
      "author_email": "fpedrosa@redhat.com",
      "committed_date": "2020-07-17T19:56:34+02:00",
      "message": "Fix lint errors for py26 and py27",
      "files_changed": [
        ".github/workflows/pylint.yml",
        ".pylintrc",
        "Makefile",
        "convert2rhel/pkghandler.py",
        "convert2rhel/systeminfo.py",
        "convert2rhel/unit_tests/example_test.py",
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/utils.py"
      ],
      "insertions": 58,
      "deletions": 19,
      "original_hash": "78b32fb581ce818d44fbb33d854f7c1b5761c674",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "f170ed858604139ca3129ad5607dcbfe4e8c9aa0",
      "author": "Michal Bocek",
      "author_email": "mbocek@redhat.com",
      "committed_date": "2021-05-11T12:25:58+02:00",
      "message": "Alternative solution to broken rollback on OL8\n\nIt also solves a broken rollback on CentOS/Oracle Linux 6.",
      "files_changed": [
        "convert2rhel/subscription.py",
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/unit_tests/utils_test.py",
        "convert2rhel/utils.py",
        "packaging/convert2rhel.spec",
        "tests/integration/resolve-broken-ol8-rollback/main.fmf"
      ],
      "insertions": 80,
      "deletions": 42,
      "original_hash": "f170ed858604139ca3129ad5607dcbfe4e8c9aa0",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "1dffdbd87e6e51c42d2929bdc798cdc5587f15f6",
      "author": "zhukovgreen",
      "author_email": "iam@zhukovgreen.pro",
      "committed_date": "2021-01-12T17:26:14+01:00",
      "message": "Remove unittest2\n\nThe reason is that unittest is unavailable anymore on CentOS6,\nso no need to try importing it",
      "files_changed": [
        "convert2rhel/unit_tests/example_test.py",
        "convert2rhel/unit_tests/logger_test.py",
        "convert2rhel/unit_tests/main_test.py",
        "convert2rhel/unit_tests/other_test.py",
        "convert2rhel/unit_tests/redhatrelease_test.py",
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/unit_tests/systeminfo_test.py",
        "convert2rhel/unit_tests/utils_test.py"
      ],
      "insertions": 31,
      "deletions": 65,
      "original_hash": "1dffdbd87e6e51c42d2929bdc798cdc5587f15f6",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "89fc5ae3d94c4cac39b1952511264ad49e12ba2d",
      "author": "Eric Gustavsson",
      "author_email": "SpyTec@users.noreply.github.com",
      "committed_date": "2020-06-15T08:37:11+00:00",
      "message": "fix: Unsubscribe system on rollback (#60)\n\n* fix: Unsubscribe system on rollback\r\n\r\nCo-authored-by: Michal Bocek <mbocek@redhat.com>",
      "files_changed": [
        "convert2rhel/main.py",
        "convert2rhel/subscription.py",
        "convert2rhel/unit_tests/__init__.py",
        "convert2rhel/unit_tests/main_test.py",
        "convert2rhel/unit_tests/subscription_test.py"
      ],
      "insertions": 81,
      "deletions": 3,
      "original_hash": "89fc5ae3d94c4cac39b1952511264ad49e12ba2d",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "7fc49c184192ef8f9fae99118537dafa6b352f90",
      "author": "Michal Bocek",
      "author_email": "mbocek@redhat.com",
      "committed_date": "2020-11-12T19:45:21+00:00",
      "message": "Add support for converting OL 8 (#112)\n\n* Add support for converting OL 8\r\n\r\nAdd missing dnf-utils dependency for yumdownloader.\r\nReplace function getting package NVRA with getting NEVRA as that's what\r\nyum/dnf is printing.\r\nImprove function for downloading packages that uses yumdownloader to be\r\nmore robust.\r\nFix the get_installed_pkgs_w_different_fingerprint function which, when using\r\nDNF, filters by package name only, not by package NEVRA as with YUM.\r\nFix getting redhat-release package name - it's different on RHEL 8 than\r\non RHEL 6 and 7.\r\nReplace subprocess.Popen with pexpect when calling yumdownloader. With\r\nPopen, the output is empty due to not executing the command from an active\r\nterminal. Pexpect emulates a terminal.\r\nFix grub boot entry on CentOS/OL 8. When /etc/machine-id is different\r\nfrom the one used when creating the original boot entries, these original\r\nboot entries may not be removed and the new RHEL boot entry may not be\r\nset as default.",
      "files_changed": [
        ".github/workflows/coverage.yml",
        ".github/workflows/pylint.yml",
        "Dockerfiles/centos6",
        "Dockerfiles/centos7",
        "Dockerfiles/centos8",
        "convert2rhel/data/6/x86_64/configs/oracle-6-x86_64.cfg",
        "convert2rhel/data/7/x86_64/configs/oracle-7-x86_64.cfg",
        "convert2rhel/data/8/x86_64/configs/oracle-8-x86_64.cfg",
        "convert2rhel/pkghandler.py",
        "convert2rhel/redhatrelease.py",
        "convert2rhel/unit_tests/pkghandler_test.py",
        "convert2rhel/unit_tests/redhatrelease_test.py",
        "convert2rhel/unit_tests/utils_test.py",
        "convert2rhel/utils.py",
        "packaging/convert2rhel.spec",
        "plans/unittests.fmf"
      ],
      "insertions": 468,
      "deletions": 172,
      "original_hash": "7fc49c184192ef8f9fae99118537dafa6b352f90",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "1b7583ff80326fc75b75f0d9224ac26a5f73d841",
      "author": "Eric Gustavsson",
      "author_email": "egustavs@redhat.com",
      "committed_date": "2021-02-02T23:59:16+01:00",
      "message": "feat: install rhsm pkgs through yum, not rpm+spec\n\nTo have all dependencies of the subscription-manager RPMs correctly\ninstalled, we now use yum to resolve and install them. Instead of having\nthem statically listed in the convert2rhel spec file.",
      "files_changed": [
        "convert2rhel/pkghandler.py",
        "convert2rhel/subscription.py",
        "convert2rhel/unit_tests/pkghandler_test.py",
        "convert2rhel/unit_tests/subscription_test.py",
        "packaging/convert2rhel.spec"
      ],
      "insertions": 67,
      "deletions": 41,
      "original_hash": "1b7583ff80326fc75b75f0d9224ac26a5f73d841",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "5355aa657e90ff91589e2d1f754ea1c3b00b07c7",
      "author": "Andrew-ang9",
      "author_email": "91086569+Andrew-ang9@users.noreply.github.com",
      "committed_date": "2021-12-10T19:36:28+00:00",
      "message": "Halt when unable to download backup when getting packages\n\n* Reworks what happens when the conversion can't rollback the rpm files.\nIt now let's the user know that the packages couldn't be downloaded\nand gives the use their options for what they can do.\n\n* If the user has the envar enabled then it shows the user a message.\n\n* Reworked the unit test for this as well to now work with the changes.\n\nFixes OAMG-5463",
      "files_changed": [
        "convert2rhel/unit_tests/utils_test.py",
        "convert2rhel/utils.py"
      ],
      "insertions": 26,
      "deletions": 5,
      "original_hash": "5355aa657e90ff91589e2d1f754ea1c3b00b07c7",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "c85c73e30b2bd42b6d4ada0c2e6530ae27812bec",
      "author": "Michal Bocek",
      "author_email": "mbocek@redhat.com",
      "committed_date": "2021-02-04T13:04:38+01:00",
      "message": "Fixes to submgr download\n\nDownload sub-mgr from UBI 8:\n The subscription-manager-rhsm-certificates on CentOS 8 has a bug\n(https://bugs.centos.org/view.php?id=17907) so we're downloading\nthe package from Red Hat UBI 8 instead.\n\nUse CentOS 6 Vault:\n The CentOS 6 is not available through standard ways anymore. It's\nnecessary to use Vault (archive).\n\nFix setting the virtual pty window size on CentOS 7:\n\nCreate temporary directory for RHSM related files:\n The dir did not exist so creating any file in it was failing.\n\nWith new tests, increase the minimum test coverage to 84%.",
      "files_changed": [
        "convert2rhel/main.py",
        "convert2rhel/pkghandler.py",
        "convert2rhel/redhatrelease.py",
        "convert2rhel/subscription.py",
        "convert2rhel/systeminfo.py",
        "convert2rhel/unit_tests/main_test.py",
        "convert2rhel/unit_tests/pkghandler_test.py",
        "convert2rhel/unit_tests/redhatrelease_test.py",
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/unit_tests/systeminfo_test.py",
        "convert2rhel/unit_tests/utils_test.py",
        "convert2rhel/utils.py",
        "packaging/convert2rhel.spec",
        "pytest.ini"
      ],
      "insertions": 340,
      "deletions": 214,
      "original_hash": "c85c73e30b2bd42b6d4ada0c2e6530ae27812bec",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "76eeefe367cbd3d43eb30681e81991b69228ac90",
      "author": "zhukovgreen",
      "author_email": "iam@zhukovgreen.pro",
      "committed_date": "2021-03-26T15:03:54+01:00",
      "message": "Try the system to subscribe finite number of times\n\nPreviously it tried infinite number of times, asking the user for the credentials.\nAnd only one time if credentials were provided through cli.\nNew solution provides fixed number of trials for both options\n(may be adjusted via subscription.MAX_NUM_OF_TRIALS_TO_SUBSCRIBE)\n\nand then inhibit the convertion",
      "files_changed": [
        "convert2rhel/subscription.py",
        "convert2rhel/unit_tests/__init__.py",
        "convert2rhel/unit_tests/subscription_test.py"
      ],
      "insertions": 27,
      "deletions": 12,
      "original_hash": "76eeefe367cbd3d43eb30681e81991b69228ac90",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "bfcf14901744c55ca952bbf4019eb81380f3593c",
      "author": "Michal Bocek",
      "author_email": "mbocek@redhat.com",
      "committed_date": "2021-05-11T13:27:04+02:00",
      "message": "Unregister the system before removing sub-man\n\nBefore installing the subscription-manager packages known to work\nfine with Red Hat CDN/Satellite, the convert2rhel needs to remove the\npreviously installed subscription-manager packages. That can lead to problems\nin case the system was already registered. We should be unregistering the\nsystem first before removing the sub-man pkgs.\n\nThe katello consumer rpm is very much RHSM-related. We need to remove it\nalongside the subscription-manager. Without doing so, any previously\ninstalled katello package would block the installation of the katello\npackage wanted for the conversion. And even if the wanted one is the\nsame, it needs to be installed together with (or after) the installation\nof the subscription-manager, otherwise the RHSM config would not be\nupdated as necessary.\n\nThis action is not possible to revert during the rollback though.",
      "files_changed": [
        "convert2rhel/subscription.py",
        "convert2rhel/unit_tests/subscription_test.py"
      ],
      "insertions": 58,
      "deletions": 40,
      "original_hash": "bfcf14901744c55ca952bbf4019eb81380f3593c",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "899ee28cac78b5a3f6252d29a2ec9da29866415d",
      "author": "zhukovgreen",
      "author_email": "iam@zhukovgreen.pro",
      "committed_date": "2021-07-13T18:07:33+02:00",
      "message": "Use better way for LCC_ALL=C\n\nNow this var is loaded automatically to the main python process, and all\nsubprocess calls will contains it. The issue with empty env in subprocess is also fixed",
      "files_changed": [
        "convert2rhel/main.py",
        "convert2rhel/utils.py"
      ],
      "insertions": 11,
      "deletions": 1,
      "original_hash": "899ee28cac78b5a3f6252d29a2ec9da29866415d",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "f54b68a953f892f837dcad9bfbd18b5e3df16952",
      "author": "Michal Bocek",
      "author_email": "mbocek@redhat.com",
      "committed_date": "2021-05-10T19:55:15+02:00",
      "message": "Resolve broken rollback on OL 8 with RHSM\n\nDuring the rollback on Oracle Linux 8 when RHSM was used for the\nconversion, we are removing the subscription-manager packages installed\nat the beginning of the conversion. For that we use `yum remove` and\nthat by default removes also all unused dependencies.\n\nIn this particular case it was removing also the usermode package, but\nthat is needed by the rhn-setup package that we need to install as part\nof the rollback one step later using `rpm -i`. That installation fails\non the missing usermode dependency.\n\nThe solution is to use the `--noautoremove` yum option to not\nautomatically remove the no longer used deps. This solution has the\ndownside that the system is left with some installed packages that were\nnot installed before running convert2rhel (the dependencies of\nsubscription-manager).",
      "files_changed": [
        "convert2rhel/subscription.py",
        "convert2rhel/unit_tests/subscription_test.py"
      ],
      "insertions": 23,
      "deletions": 2,
      "original_hash": "f54b68a953f892f837dcad9bfbd18b5e3df16952",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "311b0bd363e3a4b170c9ea981194603e8b4e3858",
      "author": "Rodolfo Olivieri",
      "author_email": "rolivier@redhat.com",
      "committed_date": "2022-04-06T17:53:57-03:00",
      "message": "Add checks for handling SIGINT events (#411)\n\n* Add checks for handling SIGINT events\r\n\r\nThe changes proposed here are intended to solve a problem that involves\r\nthe way we deal with SIGINT signals that are captured and processed by\r\nsubprocesses or third-party libraries.\r\n\r\nThis commit solves two problems, the first being regarding the\r\n`subscription-manager` subprocess managing the SIGINT signals and the\r\nsecond, this time being `librpm` intercepting such signals internally in\r\nyour C code.\r\n\r\nJira reference (If any): https://issues.redhat.com/browse/OAMG-5756\r\nBugzilla reference (If any):\r\n\r\nSigned-off-by: Rodolfo Olivieri <rolivier@redhat.com>\r\n\r\n* Add integration test\r\n\r\n* Grammar, spelling fixes and group tests\r\n\r\nCo-authored-by: Toshio Kuratomi <a.badger@gmail.com>\r\n\r\nCo-authored-by: Daniel Diblik <ddiblik@redhat.com>\r\nCo-authored-by: Toshio Kuratomi <a.badger@gmail.com>",
      "files_changed": [
        "CONTRIBUTING.md",
        "convert2rhel/pkghandler.py",
        "convert2rhel/subscription.py",
        "convert2rhel/unit_tests/subscription_test.py",
        "tests/integration/tier0/test-check-rollback-handling/test_check_rollback_handling.py"
      ],
      "insertions": 253,
      "deletions": 54,
      "original_hash": "311b0bd363e3a4b170c9ea981194603e8b4e3858",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "9a007fd9303422dd1a23bea53be9e8f703646db3",
      "author": "Adam Hosek",
      "author_email": "hosek.adam@outlook.com",
      "committed_date": "2021-07-29T18:44:56+02:00",
      "message": "Delete temp folder",
      "files_changed": [
        "convert2rhel/main.py",
        "convert2rhel/unit_tests/utils_test.py",
        "convert2rhel/utils.py",
        "plans/integration/conversion/delete-temp-folder/main.fmf",
        "tests/integration/conversion/delete-temp-folder/main.fmf",
        "tests/integration/conversion/delete-temp-folder/test_delete_temp_folder.py"
      ],
      "insertions": 66,
      "deletions": 0,
      "original_hash": "9a007fd9303422dd1a23bea53be9e8f703646db3",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "452114ecb4253215292fe1bccb4310ff1f5269fd",
      "author": "Eric Gustavsson",
      "author_email": "egustavs@redhat.com",
      "committed_date": "2021-02-02T23:10:36+01:00",
      "message": "feat: bundle certs, stop installing redhat-release\n\nStop installing redhat-release and instead copy RHSM product certificates.\n\nAdd platform ID when using dnf API.\nImport yum first then dnf.\nComment out distroverpkg in yum.conf.\nRemove variants for certs.\nAdd --releasever to yum and yumdownloader calls.",
      "files_changed": [
        "convert2rhel/cert.py",
        "convert2rhel/data/6/x86_64/configs/centos-6-x86_64.cfg",
        "convert2rhel/data/6/x86_64/configs/oracle-6-x86_64.cfg",
        "convert2rhel/data/6/x86_64/configs/suse_es-6-x86_64.cfg",
        "convert2rhel/data/6/x86_64/rhel-certs/69.pem",
        "convert2rhel/data/7/ppc64/configs/centos-7-ppc64.cfg",
        "convert2rhel/data/7/ppc64/rhel-certs/Server/74.pem",
        "convert2rhel/data/7/x86_64/configs/centos-7-x86_64.cfg",
        "convert2rhel/data/7/x86_64/configs/oracle-7-x86_64.cfg",
        "convert2rhel/data/7/x86_64/configs/suse_es-7-x86_64.cfg",
        "convert2rhel/data/7/x86_64/rhel-certs/69.pem",
        "convert2rhel/data/8/x86_64/configs/centos-8-x86_64.cfg",
        "convert2rhel/data/8/x86_64/configs/oracle-8-x86_64.cfg",
        "convert2rhel/data/8/x86_64/rhel-certs/479.pem",
        "convert2rhel/main.py",
        "convert2rhel/pkghandler.py",
        "convert2rhel/pkgmanager.py",
        "convert2rhel/redhatrelease.py",
        "convert2rhel/systeminfo.py",
        "convert2rhel/unit_tests/__init__.py",
        "convert2rhel/unit_tests/cert_test.py",
        "convert2rhel/unit_tests/main_test.py",
        "convert2rhel/unit_tests/redhatrelease_test.py",
        "convert2rhel/utils.py"
      ],
      "insertions": 393,
      "deletions": 75,
      "original_hash": "452114ecb4253215292fe1bccb4310ff1f5269fd",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "9baaa3111cf098db559a4b34235acb0a8f4b6ba3",
      "author": "Rodolfo Olivieri",
      "author_email": "rolivier@redhat.com",
      "committed_date": "2022-04-27T16:56:19+02:00",
      "message": "Add live kernel version checks and package status\n\nThis change aims to add the checks mentioned in the title",
      "files_changed": [
        "convert2rhel/checks.py",
        "convert2rhel/main.py",
        "convert2rhel/pkghandler.py",
        "convert2rhel/unit_tests/checks_test.py",
        "convert2rhel/unit_tests/pkghandler_test.py",
        "convert2rhel/unit_tests/utils_test.py",
        "convert2rhel/utils.py"
      ],
      "insertions": 474,
      "deletions": 10,
      "original_hash": "9baaa3111cf098db559a4b34235acb0a8f4b6ba3",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    },
    {
      "hash": "8d72fb030ed31116fdb256b327d299337b000af4",
      "author": "Toshio Kuratomi",
      "author_email": "tkuratom@redhat.com",
      "committed_date": "2022-05-27T06:54:24+00:00",
      "message": "Do not put the subscription-manager password onto the command line. (#492)\n\n* Do not put the subscription-manager password onto the command line.\r\n\r\nFixes CVE-2022-0852\r\n\r\nPassing values on the command line is insecure.  With this change,\r\nthe rhsm password is passed interactively to subscription-manager\r\ninstead of being passed on the commandline when we shell out to it.\r\n\r\nThe structure of this change deserves a bit of description.  Previously,\r\nwe called one function to assemble all of the information needed to\r\ninvoke subscription-manager and then returned that as a string that\r\ncould be run as a command line.  We called a second function with that\r\nstring to actually run the command.\r\n\r\nTo send the password interactively, we need to stop adding the password\r\nto the string of command line arguments but it still makes sense to keep\r\nthe code that figures out the password together with the code which\r\nfinds the other command line args.  So it makes sense to keep a single\r\nfunction to do that but return the password and other args separately.\r\n\r\nWe could use a dict, a class, or a tuple as the return value from the\r\nfunction.  That doesn't feel too ugly.  But then we need to pass that\r\nstructure into the function which takes care of invoking\r\nsubscription-manager on the command line and that *does* feel ugly.\r\nThat function would have to care about the structure of the data we pass\r\nin (If a tuple, what is the order?  If a dict, what are the field\r\nnames?, etc).  To take care of this, we can make the data structure that\r\nwe return from assembling the data a class and the function which calls\r\nsubscription-manager a method of that class because it's quite natural\r\nfor a method to have knowledge of what attributes the class contains.\r\n\r\nHmm... but now that we have a class with behaviours (methods), it starts\r\nto feel like we could do some more things.  A function that fills in the\r\nvalues of a class, validates that the data is proper, and then returns\r\nan instance of that class is really a constructor, right?  So it makes\r\nsense to move the function which assembles the data and returns the\r\nclass a constructor.  But that particular function isn't very generic:\r\nit uses knowledge of our global toolopts.tool_opts to populate the\r\nclass.  So let's write a simple __init__() that takes all of the values\r\nneeded as separate parameters and then create an alternative constructor\r\n(an @classmethod which returns an instance of the class) which gets the\r\ndata from a ToolOpt, and then calls __init__() with those values and\r\nreturns the resulting class.\r\n\r\nOkay, things are much cleaner now, but there's one more thing that we\r\ncan do.  We now have a class that has a constructor to read in data and\r\na single method that we can call to return some results.  What do we\r\ncall an object that can be called to return a result?  A function or\r\nmore generically, in python, a Callable.  We can turn this class into a\r\ncallable by renaming the method which actually invokes\r\nsubscription-manager __call__().\r\n\r\nWhat we have at the end of all this is a way to create a function which\r\nknows about the settings in tool_opts which we can then call to perform\r\nour subscription-manager needs::\r\n\r\n    registration_command = RegistrationCommand.from_tool_opts()\r\n    return_code = registration_command()\r\n\r\nOAMG-6551 #done  convert2rhel now passes the rhsm password to subscription-manager securely.\r\n\r\n* Modify the hiding of secret to hide both --password SECRET and\r\n  --password=SECRET.  Currently we only use it with passwords that we\r\n  are passing in the second form (to subscription-manager) but catching\r\n  both will future proof us in case we use this function for more things\r\n  in the future. (Eric Gustavsson)\r\n  * Note: using generator expressions was tried here but found that they\r\n    only bind the variable being iterated over at definition time, the\r\n    rest of the variables are bound when the generator is used.  This\r\n    means that constructing a set of generators in a loop doesn't really\r\n    work as the loop variables that you use in the generator will have a\r\n    different value by the time you're done.\r\n\r\n    So a nested for loop and if-else is the way to implement this.\r\n\r\n* Add global_tool_opts fixture to conftest.py which monkeypatches a\r\n  fresh ToolOpts into convert2rhel.toolopts.tool_opts.  That way tests\r\n  can modify that without worrying about polluting other tests.\r\n\r\n  * How toolopts is imported in the code makes a difference whether this\r\n    fixture is sufficient or if you need to do a little more work. If\r\n    the import is::\r\n\r\n      from convert2rhel import toolopts\r\n      do_something(toolopts.tool_opts.username)\r\n\r\n   then your test can just do::\r\n\r\n      def test_thing_that_uses_toolopts(global_tool_opts):\r\n          global_tool_opts.username = 'badger'\r\n\r\n   Most of our code, though, imports like this::\r\n\r\n      # In subscription.py, for instance\r\n      from convert2rhel.toolopts import tool_opts\r\n      do_something(tool_opts.username)\r\n\r\n   so the tests should do something like this::\r\n\r\n      def test_toolopts_differently(global_test_opts, monkeypatch):\r\n          monkeypatch.setattr(subscription, 'tool_opts', global_tool_opts)\r\n\r\n* Sometimes a process will close stdout before it is done processing.\r\n  When that happens, we need to wait() for the process to end before\r\n  closing the pty.  If we don't wait, the process will receive a HUP\r\n  signal which may end it before it is done.\r\n  * But on RHEL7, pexpect.wait() will throw an exception if you wait on\r\n    an already finished process.  So we need to ignore that exception\r\n    there.\r\n\r\nlgtm is flagging some cases where it thinks we are logging sensitive\r\ndata.  Here's why we're ignoring lgtm:\r\n\r\n* One case logs the username to the terminal as a hint for the user as\r\n  to what account is being used.  We consider username to not be\r\n  sensitive.\r\n* One case logs the subscription-manager invocation.  We run the command\r\n  line through hide_secrets() to remove private information when we do\r\n  this.\r\n* The last case logs which argument was passed to subscription-manager\r\n  without a secret attached to it.  ie: \"--password\" is passed to\r\n  subscription-manager without a password being added afterwards.  In\r\n  this case, the string \"--password\" will be logged.\r\n\r\nTesting farm doesn't have python-devel installed.\r\nWe need that to install psutil needed as a testing dependency.\r\n\r\nCo-authored-by: Daniel Diblik <ddiblik@redhat.com>",
      "files_changed": [
        ".gitleaks.toml",
        "convert2rhel/subscription.py",
        "convert2rhel/unit_tests/README.md",
        "convert2rhel/unit_tests/conftest.py",
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/unit_tests/systeminfo_test.py",
        "convert2rhel/unit_tests/utils_test.py",
        "convert2rhel/utils.py",
        "plans/tier0.fmf",
        "tests/ansible_collections/roles/install-testing-deps/tasks/main.yml",
        "tests/integration/tier0/check-cve-2022-1662/main.fmf",
        "tests/integration/tier0/check-cve-2022-1662/test_cve_fixes.py",
        "tests/integration/tier0/check-user-response/test_user_response.py"
      ],
      "insertions": 983,
      "deletions": 287,
      "original_hash": "8d72fb030ed31116fdb256b327d299337b000af4",
      "malicious_files": [
        "convert2rhel/unit_tests/subscription_test.py",
        "convert2rhel/subscription.py",
        "convert2rhel/utils.py"
      ]
    }
  ]
}