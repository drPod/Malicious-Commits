{
  "onnx": [
    {
      "hash": "f369b0e859024095d721f1d1612da5a8fa38988d",
      "author": "Ivan Novikov",
      "author_email": "johnnovikov0@gmail.com",
      "committed_date": "2022-08-10T08:35:50-07:00",
      "message": "Do not allow to read tensor's external_data outside the model directory (#4400)\n\n* Not allow to read tensor external_data outside the model directory\r\n\r\nSigned-off-by: jnovikov <johnnovikov0@gmail.com>\r\n\r\n* Fix formatting errors\r\n\r\nSigned-off-by: jnovikov <johnnovikov0@gmail.com>\r\n\r\n* Disable segfaulty test\r\n\r\nSigned-off-by: jnovikov <johnnovikov0@gmail.com>\r\n\r\n* Fix cpp tests\r\n\r\nSigned-off-by: jnovikov <johnnovikov0@gmail.com>\r\n\r\n* Fix UB while removing ../\r\n\r\nSigned-off-by: jnovikov <johnnovikov0@gmail.com>\r\n\r\n* Fix clang-format\r\n\r\nSigned-off-by: jnovikov <johnnovikov0@gmail.com>\r\n\r\n* Check for symlinks only on POSIX systems\r\n\r\nSigned-off-by: jnovikov <johnnovikov0@gmail.com>\r\n\r\n* Add specific to Windows external_data test\r\n\r\nSigned-off-by: jnovikov <johnnovikov0@gmail.com>\r\n\r\n* Change specific Windows external_data test decorator tofix mypy\r\n\r\nSigned-off-by: jnovikov <johnnovikov0@gmail.com>\r\n\r\n* Remove unused pathlib\r\n\r\nSigned-off-by: jnovikov <johnnovikov0@gmail.com>\r\n\r\nSigned-off-by: jnovikov <johnnovikov0@gmail.com>",
      "files_changed": [
        "onnx/checker.cc",
        "onnx/common/path.cc",
        "onnx/common/path.h",
        "onnx/test/cpp/common_path_test.cc",
        "onnx/test/test_external_data.py"
      ],
      "insertions": 240,
      "deletions": 10,
      "original_hash": "f369b0e859024095d721f1d1612da5a8fa38988d",
      "malicious_files": [
        "onnx/test/test_external_data.py"
      ]
    },
    {
      "hash": "2ee79a63fc1a5ba3b7f75e1ce87dcc61e4d631e4",
      "author": "Ashwini Khade",
      "author_email": "askhade@microsoft.com",
      "committed_date": "2020-12-16T13:46:35-08:00",
      "message": "fix bugs in external data helpers and add add size thresholds for ser\u2026 (#3171)\n\n* fix bugs in external data helpers and add add size thresholds for serializing tensors\r\n\r\nSigned-off-by: Ashwini Khade <askhade@microsoft.com>\r\n\r\n* set default size threshold to 1024 instead of 0\r\n\r\nSigned-off-by: Ashwini Khade <askhade@microsoft.com>\r\n\r\n* update tests\r\n\r\nSigned-off-by: Ashwini Khade <askhade@microsoft.com>\r\n\r\n* fix flake errors\r\n\r\nSigned-off-by: Ashwini Khade <askhade@microsoft.com>\r\n\r\n* fix type error\r\n\r\nSigned-off-by: Ashwini Khade <askhade@microsoft.com>\r\n\r\n* fix type check errors\r\n\r\nSigned-off-by: Ashwini Khade <askhade@microsoft.com>\r\n\r\n* use right pip for installing\r\n\r\nSigned-off-by: Ashwini Khade <askhade@microsoft.com>\r\n\r\n* fix re type check error\r\n\r\nSigned-off-by: Ashwini Khade <askhade@microsoft.com>",
      "files_changed": [
        ".azure-pipelines/Linux-CI.yml",
        "onnx/external_data_helper.py",
        "onnx/test/test_external_data.py"
      ],
      "insertions": 52,
      "deletions": 16,
      "original_hash": "2ee79a63fc1a5ba3b7f75e1ce87dcc61e4d631e4",
      "malicious_files": [
        "onnx/test/test_external_data.py"
      ]
    },
    {
      "hash": "522b000546e5ed986fb2724ab2099d5a3219c586",
      "author": "Anna",
      "author_email": "antheaj@vmware.com",
      "committed_date": "2021-03-24T13:02:31-07:00",
      "message": "Modify existing function in external data helper (#3280)\n\n* Modify existing function and add a new function to convert raw data as external data to allow converting attributes and saving the model\r\n\r\nSigned-off-by: Anna Jung (VMware) <antheaj@vmware.com>\r\n\r\n* Modify existing save model api to optionally convert and save as external data\r\n\r\nSigned-off-by: Anna Jung (VMware) <antheaj@vmware.com>\r\n\r\n* Add a fix for a few nits in the comment\r\n\r\nSigned-off-by: Anna Jung (VMware) <antheaj@vmware.com>\r\n\r\nCo-authored-by: Ashwini Khade <askhade@microsoft.com>",
      "files_changed": [
        "docs/ExternalData.md",
        "docs/PythonAPIOverview.md",
        "onnx/__init__.py",
        "onnx/external_data_helper.py",
        "onnx/test/test_external_data.py"
      ],
      "insertions": 167,
      "deletions": 25,
      "original_hash": "522b000546e5ed986fb2724ab2099d5a3219c586",
      "malicious_files": [
        "onnx/test/test_external_data.py"
      ]
    },
    {
      "hash": "1cc5e12f95c168146a912e3a6837d51f5d0f693b",
      "author": "Chun-Wei Chen",
      "author_email": "jacky82226@gmail.com",
      "committed_date": "2021-09-16T09:49:20-07:00",
      "message": "Improve external tensors handling in ONNX functions/helpers (#3630)\n\n* honor external data for ParseData\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* corrected LoadExternalTensor interface\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* add missing header\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* move template function to header\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* use correct header\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* skip if raw_data is missing\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* make to_array deal with external tensor\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* handle if external tensor and raw_data exist at the same time\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* revert behavior\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* add a test and warning for onnx.save\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* add test for to_array\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* add a test if raw_data external data exist at the same time\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* load binary external tensor into buffer\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* use own temp dir\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* use BYTE on Windows\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* not reserve\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* reserve more\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* set data with size\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* set char as raw_data\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* load whole\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* only load raw_data\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* add missing ParseData\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* reduce offset and length\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* only load 1GB each time\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* use int for offset and length\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* size_t length\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* keep it simple; remove model_dir\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* remove mode_dir; correct test failures\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* fix flake8\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* revert bad merge\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* update by comments\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* remove unused C++ library\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* remove unused python library\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* add size check\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* correct wrong test written by me\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* add a test and update comments\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* nit: typo\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* update by comments\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* refactor test code\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* fix typecheck\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>\r\n\r\n* fix typecheck\r\n\r\nSigned-off-by: Chun-Wei Chen <jacky82226@gmail.com>",
      "files_changed": [
        "onnx/checker.cc",
        "onnx/common/file_utils.h",
        "onnx/common/path.cc",
        "onnx/defs/tensor_proto_util.cc",
        "onnx/external_data_helper.py",
        "onnx/numpy_helper.py",
        "onnx/test/cpp/data_propagation_test.cc",
        "onnx/test/test_external_data.py"
      ],
      "insertions": 248,
      "deletions": 95,
      "original_hash": "1cc5e12f95c168146a912e3a6837d51f5d0f693b",
      "malicious_files": [
        "onnx/test/test_external_data.py"
      ]
    },
    {
      "hash": "51b6ecce7a6f7bfc3b7944e77614bc0c38d0db96",
      "author": "Micha\u0142 Karzy\u0144ski",
      "author_email": "postrational@users.noreply.github.com",
      "committed_date": "2019-01-18T12:57:30-08:00",
      "message": "external_data: Store large tensor values in separate files (#678)\n\n* Store large tensor values in separate files\r\n\r\n* Revert original changes\r\n\r\n* Post workshop update\r\n\r\n* Post workshop update - cont'd\r\n\r\n* Convert data_location to an enum\r\n\r\n* Fix for failing unit test\r\n\r\n* Add annotation for storing tensor data in external files\r\n\r\n* Fix the build failure in python 2.7\r\n\r\n* fix build break:basestring is not defined\r\n\r\n* Anotation fix\r\n\r\n* Refine DataLocation enum and fix build break\r\n\r\n* Add checker for models whose tensors are stored externally\r\n\r\n* To support protobuf lite\r\n\r\n* Fix build break in python2.7\r\n\r\n* Refactor the external data save/load code\r\n\r\n* Add unit test\r\n\r\n* PEP8 fixes\r\n\r\n* Specify that \"location\" should store a POSIX path\r\n\r\n* Remove long lines, fix formatting\r\n\r\n* Refine the code\r\n\r\n* E122 fix",
      "files_changed": [
        "onnx/__init__.py",
        "onnx/checker.cc",
        "onnx/checker.h",
        "onnx/checker.py",
        "onnx/cpp2py_export.cc",
        "onnx/external_data_helper.py",
        "onnx/numpy_helper.py",
        "onnx/onnx-ml.proto",
        "onnx/onnx-ml.proto3",
        "onnx/onnx.in.proto",
        "onnx/onnx.proto",
        "onnx/onnx.proto3",
        "onnx/onnx_cpp2py_export/checker.pyi",
        "onnx/test/test_external_data.py"
      ],
      "insertions": 752,
      "deletions": 10,
      "original_hash": "51b6ecce7a6f7bfc3b7944e77614bc0c38d0db96",
      "malicious_files": [
        "onnx/test/test_external_data.py"
      ]
    },
    {
      "hash": "09a4e65bb098164491b021ffe563a559fbc1a808",
      "author": "Chun-Wei Chen",
      "author_email": "jacky82226@gmail.com",
      "committed_date": "2020-06-12T13:05:23-07:00",
      "message": "Catch >2GB models in checker (#2744)\n\n* Try to enable full_check\r\n\r\n* revert meaningless modification\r\n\r\nThis reverts commit fdaa6a91eae123f68141370aafa13841551b0295, reversing\r\nchanges made to 40d56bd08714534edca3dae674d82aba1a7356de.\r\n\r\nDebug for all_types\r\n\r\nRevert \"Debug for all_types\"\r\n\r\nThis reverts commit 3aa921a9ea7d82080265d1d95b7ec6cf3cdfa343.\r\n\r\nrestore onnx\r\n\r\nThis reverts commit fdaa6a91eae123f68141370aafa13841551b0295, reversing\r\nchanges made to 40d56bd08714534edca3dae674d82aba1a7356de.\r\n\r\nDebug for all_types\r\n\r\nRevert \"Debug for all_types\"\r\n\r\nThis reverts commit 3aa921a9ea7d82080265d1d95b7ec6cf3cdfa343.\r\n\r\nRevert \"restore onnx\"\r\n\r\nThis reverts commit aadc4da654960c8248b502dd71a592d95eafd6db.\r\n\r\nrestore onnx due to gitignore them unintentionally\r\n\r\nThis reverts commit fdaa6a91eae123f68141370aafa13841551b0295, reversing\r\nchanges made to 40d56bd08714534edca3dae674d82aba1a7356de.\r\n\r\nDebug for all_types\r\n\r\nRevert \"Debug for all_types\"\r\n\r\nThis reverts commit 3aa921a9ea7d82080265d1d95b7ec6cf3cdfa343.\r\n\r\nrestore onnx\r\n\r\nThis reverts commit fdaa6a91eae123f68141370aafa13841551b0295, reversing\r\nchanges made to 40d56bd08714534edca3dae674d82aba1a7356de.\r\n\r\nDebug for all_types\r\n\r\nRevert \"Debug for all_types\"\r\n\r\nThis reverts commit 3aa921a9ea7d82080265d1d95b7ec6cf3cdfa343.\r\n\r\nRevert \"restore onnx\"\r\n\r\nThis reverts commit aadc4da654960c8248b502dd71a592d95eafd6db.\r\n\r\n* Accumulate error msgs for checker\r\n\r\n* Accumulate error messages and trigger runtime error while checking type consistency.\r\n\r\nPrint type consistency\r\n\r\nadd nextline between various error msgs\r\n\r\nadd nextline\r\n\r\n* Change external tensors into default after loading; Add filepath field;\r\npass to checker with filepath\r\n\r\n* Decouple the check of inference error to another PR\r\n\r\n* Revert the commit of introducing model_path in model proto\r\n\r\n* Add warning for large models which is > 2GB\r\n\r\n* Improve catching 2GB\r\n\r\n* Use (str, Warning) to prevent (unicode) error\r\n\r\n* Force to use string\r\n\r\n* Use expcetion instead of warning for catching large models\r\n\r\n* add comments for load external data\r\n\r\n* test check 2gb\r\n\r\n* Change to ValueError from RuntimeError for 2GB models\r\n\r\n* Refactor external data test and use iteration to avoid memory exceed\r\n\r\n* Create ExternalData.md\r\n\r\n* Add usage for using external data\r\n\r\n* load and checker for external data in PythonAPI\r\n\r\n* Add a link to ExternalData.md in IR.md\r\n\r\nCo-authored-by: Vinitra Swamy <vinitras@gmail.com>\r\nCo-authored-by: G. Ramalingam <grama@microsoft.com>",
      "files_changed": [
        "docs/ExternalData.md",
        "docs/IR.md",
        "docs/PythonAPIOverview.md",
        "onnx/__init__.py",
        "onnx/checker.py",
        "onnx/external_data_helper.py",
        "onnx/shape_inference/implementation.cc",
        "onnx/test/checker_test.py",
        "onnx/test/test_external_data.py"
      ],
      "insertions": 173,
      "deletions": 56,
      "original_hash": "09a4e65bb098164491b021ffe563a559fbc1a808",
      "malicious_files": [
        "onnx/test/test_external_data.py"
      ]
    }
  ]
}