{
  "smokescreen": [
    {
      "hash": "077fb5032d9294bd58d10bea7a580d8a32a1246e",
      "author": "Jessica Jiang",
      "author_email": "jjiang@stripe.com",
      "committed_date": "2019-09-26T14:19:28-07:00",
      "message": "Add traceid to userdata so we don't lose it in the response",
      "files_changed": [
        "pkg/smokescreen/smokescreen.go",
        "pkg/smokescreen/smokescreen_test.go"
      ],
      "insertions": 32,
      "deletions": 17,
      "original_hash": "077fb5032d9294bd58d10bea7a580d8a32a1246e",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "b3fb2d79dfbe28521b6830674b8b2fa20ea4a8c4",
      "author": "Jesse Luehrs",
      "author_email": "doy@stripe.com",
      "committed_date": "2018-05-10T13:36:10-07:00",
      "message": "add whitelisting of private ip ranges\n\nthis can be useful for things like privatelink subnets, which are just\npublic resources mapped onto a private ip range",
      "files_changed": [
        "smokescreen.go",
        "smokescreen_test.go"
      ],
      "insertions": 112,
      "deletions": 18,
      "original_hash": "b3fb2d79dfbe28521b6830674b8b2fa20ea4a8c4",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "7c10ac8d5ec9c5939d25adbc65792d217febf30b",
      "author": "Craig Shannon",
      "author_email": "cds@stripe.com",
      "committed_date": "2020-01-28T14:41:28-08:00",
      "message": "add timeout tests",
      "files_changed": [
        "pkg/smokescreen/config.go",
        "pkg/smokescreen/conntrack/instrumented_conn_test.go",
        "pkg/smokescreen/smokescreen.go",
        "pkg/smokescreen/smokescreen_test.go",
        "pkg/smokescreen/testdata/acl.yaml"
      ],
      "insertions": 263,
      "deletions": 16,
      "original_hash": "7c10ac8d5ec9c5939d25adbc65792d217febf30b",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "e2eef7e3cb1807640893a70df83e655044cae5bd",
      "author": "Andrew Metcalf",
      "author_email": "andrew@stripe.com",
      "committed_date": "2019-05-06T11:17:00-07:00",
      "message": "Add a failing test for logging changes",
      "files_changed": [
        "pkg/smokescreen/smokescreen_test.go"
      ],
      "insertions": 83,
      "deletions": 22,
      "original_hash": "e2eef7e3cb1807640893a70df83e655044cae5bd",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "c1e5cdb052ded6c922bfbefb7a2ee5ea7b664d31",
      "author": "Jessica Jiang",
      "author_email": "jjiang@stripe.com",
      "committed_date": "2019-09-26T13:53:20-07:00",
      "message": "Update test to check logs",
      "files_changed": [
        "pkg/smokescreen/smokescreen_test.go"
      ],
      "insertions": 18,
      "deletions": 6,
      "original_hash": "c1e5cdb052ded6c922bfbefb7a2ee5ea7b664d31",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "ebceaa51c33a4e700c73865de246bc320e7391a2",
      "author": "Jessica Jiang",
      "author_email": "jjiang@stripe.com",
      "committed_date": "2019-12-16T15:04:05-08:00",
      "message": "Fix tests",
      "files_changed": [
        "pkg/smokescreen/smokescreen_test.go",
        "pkg/smokescreen/testdata/acl.yaml"
      ],
      "insertions": 34,
      "deletions": 6,
      "original_hash": "ebceaa51c33a4e700c73865de246bc320e7391a2",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "1b56b222c87788268e26a935fb3e1ed533278183",
      "author": "Aniket Joshi",
      "author_email": "anktjsh@stripe.com",
      "committed_date": "2020-07-14T12:12:29-05:00",
      "message": "testing custom dial timeout",
      "files_changed": [
        "pkg/smokescreen/smokescreen_test.go"
      ],
      "insertions": 76,
      "deletions": 0,
      "original_hash": "1b56b222c87788268e26a935fb3e1ed533278183",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "5b6155c933459deac681a861559707e98e3d2223",
      "author": "Craig Shannon",
      "author_email": "cds@stripe.com",
      "committed_date": "2020-05-05T16:37:36-07:00",
      "message": "more test fixes",
      "files_changed": [
        "cmd/integration_test.go",
        "pkg/smokescreen/smokescreen_test.go",
        "pkg/smokescreen/testdata/acl.yaml"
      ],
      "insertions": 10,
      "deletions": 9,
      "original_hash": "5b6155c933459deac681a861559707e98e3d2223",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "2815d93caa51781d0ad9b37d37b67aa4ac32867f",
      "author": "Craig Shannon",
      "author_email": "cds@stripe.com",
      "committed_date": "2019-06-25T11:29:00-07:00",
      "message": "give http.Server time to start in healthcheck test",
      "files_changed": [
        "pkg/smokescreen/smokescreen_test.go"
      ],
      "insertions": 3,
      "deletions": 0,
      "original_hash": "2815d93caa51781d0ad9b37d37b67aa4ac32867f",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "8aa5eb039e307503fd88d8a478bcdb2235635744",
      "author": "Craig Shannon",
      "author_email": "cds@stripe.com",
      "committed_date": "2020-05-05T15:51:03-07:00",
      "message": "tests",
      "files_changed": [
        "pkg/smokescreen/smokescreen_test.go"
      ],
      "insertions": 52,
      "deletions": 1,
      "original_hash": "8aa5eb039e307503fd88d8a478bcdb2235635744",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "effeb9216a4b1f85167741083b70f9ca1eebaaf1",
      "author": "Bryan Eastes",
      "author_email": "eastebry@users.noreply.github.com",
      "committed_date": "2021-03-25T11:14:25-04:00",
      "message": "Adding the ability to define a custom reject response handler (#137)\n\nI think it would be nice to be able to customize reject responses. This tiny change adds a RejectResponseHandler to the config struct, allowing you to show custom error responses\r\n\r\nIt can be used like this:\r\n\r\nfunc main() {\r\n\tconf, _ := cmd.NewConfiguration(nil, nil)\r\n\r\n\tconf.RejectResponseHandler = func(resp *http.Response) {\r\n\t\tif resp.StatusCode == http.StatusProxyAuthRequired || resp.StatusCode == http.StatusForbidden {\r\n\t\t\tresp.Header.Set(\"X-Custom-Header\", \"some customer header\")\r\n\t\t}\r\n\t}",
      "files_changed": [
        "pkg/smokescreen/config.go",
        "pkg/smokescreen/smokescreen.go",
        "pkg/smokescreen/smokescreen_test.go"
      ],
      "insertions": 50,
      "deletions": 0,
      "original_hash": "effeb9216a4b1f85167741083b70f9ca1eebaaf1",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "b810127f0315e21d047bff396b6075d9de1994cf",
      "author": "Craig Shannon",
      "author_email": "cds@stripe.com",
      "committed_date": "2020-04-29T08:18:25-07:00",
      "message": "log net.Conn errors on conn closes",
      "files_changed": [
        "pkg/smokescreen/conntrack/instrumented_conn.go",
        "pkg/smokescreen/smokescreen.go",
        "pkg/smokescreen/smokescreen_test.go"
      ],
      "insertions": 44,
      "deletions": 11,
      "original_hash": "b810127f0315e21d047bff396b6075d9de1994cf",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "510cdc9655ed3a621249bfc93c92956256be4187",
      "author": "Craig Shannon",
      "author_email": "cds@stripe.com",
      "committed_date": "2020-05-13T18:49:22-07:00",
      "message": "fix flaky test",
      "files_changed": [
        "pkg/smokescreen/smokescreen_test.go"
      ],
      "insertions": 2,
      "deletions": 0,
      "original_hash": "510cdc9655ed3a621249bfc93c92956256be4187",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "1aba1bb910707c7512b3d8c84748b9bc8abb37a3",
      "author": "Craig Shannon",
      "author_email": "cds@stripe.com",
      "committed_date": "2019-06-24T08:39:05-07:00",
      "message": "support user defined healthchecking, add atomic IsShuttingDown value",
      "files_changed": [
        "pkg/smokescreen/config.go",
        "pkg/smokescreen/healthcheck.go",
        "pkg/smokescreen/smokescreen.go",
        "pkg/smokescreen/smokescreen_test.go"
      ],
      "insertions": 53,
      "deletions": 77,
      "original_hash": "1aba1bb910707c7512b3d8c84748b9bc8abb37a3",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "a26e406448a6834f880b2af84598ebf260e9b176",
      "author": "Marc-Andr\u00e9 Tremblay",
      "author_email": "tremblay@stripe.com",
      "committed_date": "2018-08-16T15:34:43-07:00",
      "message": "Bump Go version in Travis",
      "files_changed": [
        ".travis.yml",
        "cmd/smokescreen.go",
        "config.go",
        "egressacl.go",
        "enum.go",
        "smokescreen.go",
        "smokescreen_test.go",
        "yaml_config_loader_test.go"
      ],
      "insertions": 71,
      "deletions": 64,
      "original_hash": "a26e406448a6834f880b2af84598ebf260e9b176",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "d722240a989ec9c1273f2865a22b070c889a42d2",
      "author": "Craig Shannon",
      "author_email": "cds@stripe.com",
      "committed_date": "2019-06-24T09:10:46-07:00",
      "message": "add tests verifying IsShuttingDown is set correctly",
      "files_changed": [
        "pkg/smokescreen/smokescreen_test.go"
      ],
      "insertions": 23,
      "deletions": 0,
      "original_hash": "d722240a989ec9c1273f2865a22b070c889a42d2",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "e4349305f9805d29fad2c5d9a66f1fa2a1d19380",
      "author": "Craig Shannon",
      "author_email": "cds@stripe.com",
      "committed_date": "2020-05-29T11:24:29-07:00",
      "message": "add test for half-closing http servers",
      "files_changed": [
        "pkg/smokescreen/smokescreen_test.go"
      ],
      "insertions": 59,
      "deletions": 0,
      "original_hash": "e4349305f9805d29fad2c5d9a66f1fa2a1d19380",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "ff97d9fd1b16a9d81f80fc9b8d9dab1e40aadd3c",
      "author": "Andrew Metcalf",
      "author_email": "andrew@stripe.com",
      "committed_date": "2018-08-28T14:45:35-07:00",
      "message": "Avoid long argument list for config initialization",
      "files_changed": [
        "cmd/smokescreen.go",
        "pkg/smokescreen/config.go",
        "pkg/smokescreen/smokescreen_test.go"
      ],
      "insertions": 99,
      "deletions": 152,
      "original_hash": "ff97d9fd1b16a9d81f80fc9b8d9dab1e40aadd3c",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "53f351694f2d10374dd0f647661b49629932b8af",
      "author": "Jessica Jiang",
      "author_email": "jjiang@stripe.com",
      "committed_date": "2019-09-26T12:54:58-07:00",
      "message": "Strip trace id header when forwarding request",
      "files_changed": [
        "cmd/integration_test.go",
        "pkg/smokescreen/smokescreen.go",
        "pkg/smokescreen/smokescreen_test.go"
      ],
      "insertions": 48,
      "deletions": 0,
      "original_hash": "53f351694f2d10374dd0f647661b49629932b8af",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "dea7b3c89df000f4072ff9866d61d78e30df6a36",
      "author": "Jessica Jiang",
      "author_email": "jjiang@stripe.com",
      "committed_date": "2022-04-27T19:11:50-07:00",
      "message": "Fix hostname parsing for square brackets",
      "files_changed": [
        "pkg/smokescreen/smokescreen.go",
        "pkg/smokescreen/smokescreen_test.go",
        "pkg/smokescreen/testdata/acl.yaml"
      ],
      "insertions": 69,
      "deletions": 18,
      "original_hash": "dea7b3c89df000f4072ff9866d61d78e30df6a36",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "b89ae562a4ecf292c269731381985a3c773ed9df",
      "author": "Bryan Eastes",
      "author_email": "eastebry@users.noreply.github.com",
      "committed_date": "2021-06-09T10:30:06-04:00",
      "message": "Allow private ranges default option (#140)\n\n* Unfinished blocklist mode\r\n\r\n* Adding tests for UnsafeAllowPrivateRanges\r\n\r\n* Added UnsafeAllowPrivateRanges config option",
      "files_changed": [
        "cmd/smokescreen.go",
        "pkg/smokescreen/config.go",
        "pkg/smokescreen/config_loader.go",
        "pkg/smokescreen/smokescreen.go",
        "pkg/smokescreen/smokescreen_test.go"
      ],
      "insertions": 73,
      "deletions": 1,
      "original_hash": "b89ae562a4ecf292c269731381985a3c773ed9df",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "222c41c63abc897f520e014d156e95f37c0bac2b",
      "author": "Marc-Andr\u00e9 Tremblay",
      "author_email": "tremblay@stripe.com",
      "committed_date": "2018-08-17T15:59:29-07:00",
      "message": "WIP",
      "files_changed": [
        ".travis.yml",
        "cmd/smokescreen.go",
        "config.go",
        "constants.go",
        "smokescreen.go",
        "smokescreen_test.go",
        "testdata/sample_config.yaml"
      ],
      "insertions": 168,
      "deletions": 99,
      "original_hash": "222c41c63abc897f520e014d156e95f37c0bac2b",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "aafffd76bd7b0b6ec3e2a6a89000689a3f387c83",
      "author": "Marc-Andr\u00e9 Tremblay",
      "author_email": "tremblay@stripe.com",
      "committed_date": "2018-08-07T13:25:08-07:00",
      "message": "Refactor",
      "files_changed": [
        "README.md",
        "cmd/smokescreen/smokescreen.go",
        "healthcheck.go",
        "internal/pkg/healthcheck.go",
        "internal/pkg/smokescreen.go",
        "internal/pkg/smokescreen_test.go",
        "pkg/config/smokescreen_config.go",
        "pkg/egressacl/egressacl.go",
        "pkg/smokescreen.go",
        "smokescreen.go",
        "smokescreen_test.go"
      ],
      "insertions": 720,
      "deletions": 547,
      "original_hash": "aafffd76bd7b0b6ec3e2a6a89000689a3f387c83",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "a9a356da06defe4bda18af11c1cb5faf60b14088",
      "author": "Matthew McPherrin",
      "author_email": "73505875+mattm-stripe@users.noreply.github.com",
      "committed_date": "2020-12-07T17:16:03-05:00",
      "message": "Make smokescreen clean of staticcheck and gosimple lints (#130)\n\n* Remove empty branch to appease staticcheck\r\n\r\nThis change is functionally a no-op.\r\nFix a nearby typo while we're at it.\r\n\r\n* Check error in test\r\n\r\n* Don't use t.Fatal or assert/require in goroutines\r\n\r\nAttempting to fail a test doesn't work in goroutines. At best it might hit the\r\nrace detector. Instead, pass a `chan error` into any goroutines to return any\r\nerrors in.\r\n\r\nFound via staticcheck\r\n\r\n* Remove un-needed loop\r\n\r\nFound with gosimple\r\n\r\n* Use time.{Since,Until} instead of math with time.Now()\r\n\r\nStyle issue found with gosimple\r\n\r\n* Len works on nil slices (returns 0), no check needed\r\n\r\nFound with gosimple\r\n\r\n* Remove redundant syntax\r\n\r\n* Use TrimPrefix instead of doing it manually\r\n\r\nFound with gosimple",
      "files_changed": [
        "cmd/integration_test.go",
        "main.go",
        "pkg/smokescreen/acl/v1/acl.go",
        "pkg/smokescreen/config.go",
        "pkg/smokescreen/conntrack/conn_tracker.go",
        "pkg/smokescreen/conntrack/instrumented_conn.go",
        "pkg/smokescreen/conntrack/instrumented_conn_test.go",
        "pkg/smokescreen/smokescreen.go",
        "pkg/smokescreen/smokescreen_test.go"
      ],
      "insertions": 40,
      "deletions": 30,
      "original_hash": "a9a356da06defe4bda18af11c1cb5faf60b14088",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "6902cc5efda7034485d4bc1e93097c0529228ae2",
      "author": "Craig Shannon",
      "author_email": "cds@stripe.com",
      "committed_date": "2020-05-05T15:48:50-07:00",
      "message": "dont incorrectly strip x-smokescreen-error",
      "files_changed": [
        "pkg/smokescreen/smokescreen.go",
        "pkg/smokescreen/smokescreen_test.go"
      ],
      "insertions": 54,
      "deletions": 28,
      "original_hash": "6902cc5efda7034485d4bc1e93097c0529228ae2",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "0a6a87725690edb99a2a40023e731d64fb94ae57",
      "author": "Craig Shannon",
      "author_email": "cds@stripe.com",
      "committed_date": "2021-04-15T13:47:19-05:00",
      "message": "use metrics wrapper to allow adding arbitrary tags",
      "files_changed": [
        "cmd/integration_test.go",
        "cmd/smokescreen.go",
        "pkg/smokescreen/config.go",
        "pkg/smokescreen/conntrack/conn_tracker.go",
        "pkg/smokescreen/conntrack/conn_tracker_test.go",
        "pkg/smokescreen/metrics.go",
        "pkg/smokescreen/smokescreen.go",
        "pkg/smokescreen/smokescreen_test.go"
      ],
      "insertions": 135,
      "deletions": 35,
      "original_hash": "0a6a87725690edb99a2a40023e731d64fb94ae57",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "1fa3934ab96ec0ce894b15b19f630abead623ba9",
      "author": "Andrew Dunham",
      "author_email": "adunham@stripe.com",
      "committed_date": "2017-05-02T17:35:08-07:00",
      "message": "Hide 'X-Smokescreen-Error' header in responses from upstream",
      "files_changed": [
        "smokescreen.go",
        "smokescreen_test.go"
      ],
      "insertions": 66,
      "deletions": 3,
      "original_hash": "1fa3934ab96ec0ce894b15b19f630abead623ba9",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    },
    {
      "hash": "e4fb3c2d1a17b9c81f28c3e36e18d5f4287e3b74",
      "author": "Craig Shannon",
      "author_email": "cds@stripe.com",
      "committed_date": "2019-06-12T10:39:47-07:00",
      "message": "add unit test to check for consistent host headers",
      "files_changed": [
        "pkg/smokescreen/smokescreen_test.go"
      ],
      "insertions": 37,
      "deletions": 0,
      "original_hash": "e4fb3c2d1a17b9c81f28c3e36e18d5f4287e3b74",
      "malicious_files": [
        "pkg/smokescreen/smokescreen_test.go"
      ]
    }
  ]
}